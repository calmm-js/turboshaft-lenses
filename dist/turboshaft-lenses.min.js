!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("infestines")):"function"==typeof define&&define.amd?define(["exports","infestines"],t):t(n.turboshaftLenses={},n.I)}(this,function(n,a){"use strict";function t(n){return new(c(n,function(){}))}function r(n){var t=c(n,function(n){this.$1=n});return s(function(n){return new t(n)})}function i(n){var r=c(n,function(n,t){this.$1=n,this.$2=t});return s(function(n,t){return new r(n,t)})}function u(n){var i=c(n,function(n,t,r){this.$1=n,this.$2=t,this.$3=r});return s(function(n,t,r){return new i(n,t,r)})}function e(n,t,r){if(!this)return new e(n,t,r);this.map=n,this.of=t,this.ap=r}function f(n,t,r){var i=Object.assign({},t);return void 0===r?delete i[n]:i[n]=r,i}function o(n){switch(typeof n){case"string":return j(n);case"number":return v(n);case"object":if(Array.isArray(n)){var t=n.length;if(0===t)return h;for(var r=o(n[--t]);t;)r=l(o(n[--t]),r);return r}return n;default:return I(n)}}var s=function(n){return n},c=function(n,t){return a.inherit(s(t),Object,{$:n})},h=t(function(n,t){return t}),$=u(function(i,n){var s,c,u=this.$1;return this.$2.map((s=u,c=i,function(n){var t=0;if((null==c||(t=c.length)>>0!==t||t<0)&&(t=0,c=""),void 0!==n){for(var r=Math.max(s+1,t),i=Array(r),u=0;u<r;++u)i[u]=c[u];return i[s]=n,i}if(t<=s)return function(n,t,r,i,u){for(;i<u;)n[t++]=r[i++];return n}(Array(t),0,c,0,t);for(var e=Array(t-1),f=0;f<s;++f)e[f]=c[f];for(var o=s+1;o<t;++o)e[o-1]=c[o];return e}),this.$3.$(function(n,t){if(null!=i){var r=i.length;return r>>0===r&&u<r?i[u]:void 0}}(),u))}),v=r(function(n,t){return $(this.$1,n,t)}),l=i(function(n,t){return this.$1.$(n,this.$2.$(n,t))}),d=function(n,t){return e(a.sndU,a.always(t),n)},p=a.inherit(function n(t,r,i,u){if(!this)return new n(t,r,i,u);e.call(this,t,r,i),this.chain=u},e)(a.applyU,a.id,a.applyU,a.applyU),y=d(function(n,t){return void 0!==n?n:t}),g=d(function(n,t){return n+t},0),m=function(n,t){return null!=t?t[n]:void 0},w=i(function(n,t){var r=this.$1;return this.$2.$(m(r,n),r)}),b=i(function(n,t){var r=this.$1;return f(r,n,this.$2.$(m(r,n),r))}),A=u(function(t,n){var r=this.$1;return this.$3(function(n){return f(r,t,n)},this.$2.$(m(r,t),r))}),j=r(function(n,t){return n===p?b(this.$1,t):n===y?w(this.$1,t):A(this.$1,t,n.map)}),U=r(function(n,t){return this.$1}),x=r(function(n,t){return this.$1(n,t)}),O=t(function(n,t){return n}),M=r(function(n,t){return void 0===n?this.$1:n}),_=function(n,t){return n.$(t,void 0)},q=i(function(n,t){return this.$2.$(this.$1(n,t),t)}),E=u(function(n,t){return this.$3(a.always(n),this.$2.$(this.$1(n,t),t))}),I=r(function(n,t){return n===p?O:n===y?q(this.$1,t):E(this.$1,t,n.map)}),L=function(r){return function(t){return function(n){return r!==n?[n,t]:t}}},P=function(n){return function(n,t){for(;L!==n;)t.push(n[0]),n=n[1];return t}(n,[]).reverse()},k=i(function(n,t){if(null!=n&&(t=n.length)>>0===t&&0<t){for(var r=this.$1,i=this.$2,u=Array(t),e=0,f=!0,o=0;o<t;++o){var s=n[o],c=r.$(s,o);i!==c&&(u[e++]=c,f&&(f=s===c&&(0!==s||1/s==1/c)||s!=s&&c!=c))}return e!==t?(u.length=e,u):f?n:u}return n}),z=r(function(n,t){if(null!=n&&(t=n.length)>>0===t&&0<t)for(var r=this.$1,i=0;i<t;++i){var u=r.$(n[i],i);if(void 0!==u)return u}}),B=i(function(n,t){var r=this.$1,i=r.map,u=r.ap,e=r.of;if(null==n)return e(n);var f=n.length;if(f>>0!==f||f<0)return e(n);var o=e(L),s=this.$2;if(i===a.sndU){for(var c=0;c<f;++c)o=u(o,s.$(n[c],c));return o}for(var h=L(void 0),$=0;$<f;++$)o=u(i(h,o),s.$(n[$],$));return i(P,o)}),C=t(function(n,t){return n===p?k(t):n===y?z(t):B(n,t)}),D=i(function(n,t){return this.$1(n,t)?this.$2.$(n,t):n}),F=i(function(n,t){return this.$1(n,t)?this.$2.$(n,t):void 0}),G=u(function(n,t){return this.$1(n,t)?this.$2.$(n,t):this.$3(n)}),H=r(function(n,t){return n===p?D(this.$1,t):n===y?F(this.$1,t):G(this.$1,t,n.of)}),J=function(r,i){return function(t,n){return t=r(t),arguments.length<2?function(n){return i(t,n)}:i(t,n)}},K=function(i,u,e){return function(r,t,n){return r=i(r),arguments.length<2?function(t,n){return t=u(r,t),arguments.length<2?function(n){return e(t,n)}:e(t,n)}:(t=u(r,t),arguments.length<3?function(n){return e(t,n)}:e(t,n))}},N=K(r(function(n,t){this.$1(n,t)}),function(n,t){return o(t).$(y,n)},_),Q=i(function(n,t){this.$2=this.$1(this.$2,n,t)}),R=a.curry(function(n,t,r,i){var u=Q(n,t);return o(r).$(y,u).$(i,void 0),u.$2}),S=K(x,function(n,t){return o(t).$(y,n)},_),T=J(function(n){return o(n).$(y,O)},_),V=K(o,function(n,t){return n.$(p,x(t))},_),W=K(o,function(n,t){return n.$(p,U(t))},_),X=M(0),Y=J(function(n){return o(n).$(g,X)},_);n.toOptic=o,n.elems=C,n.when=H,n.forEach=N,n.foldl=R,n.get=T,n.getAs=S,n.modify=V,n.set=W,n.sum=Y,Object.defineProperty(n,"__esModule",{value:!0})});
